!function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this,n=(e.jc,Array.prototype),r=Object.prototype;n.push;slice=n.slice,toString=r.toString,hasOwnProperty=r.hasOwnProperty;var t=Array.isArray,i=Object.keys,s=Object.values?Object.values:function(n){return i(n).map(function(e){return n[e]})},l=(Object.create,function(e){return e instanceof l?e:this instanceof l?void(this._wrapped=e):new l(e)});function c(e,n,r){return l.isNoVal(e)||l.isNoVal(n)?l.isNoVal(e)?n:e:(r="max"==r?n<e:e<n)?e:n}function f(n,e){var r={};return l.isArray(e)?l.map(e,function(e){r[n+e]=e}):l.isObject(e)?l.forIn(e,function(e,n){r[e]=n}):l.isString(e)&&(r[n+e]=e),r}function p(e,n){var i={},o=e.length,a={};return l.map(e,function(t){l.isObjEmpty(n.colObj)||l.forIn(n.colObj,function(e,n){var r=l.isFunction(n)?n(t):t[n];i[e]=r}),l.isObjEmpty(n.sumObj)||l.forIn(n.sumObj,function(e,n){var r=l.isFunction(n)?n(t):t[n];i[e]?i[e]+=r||0:i[e]=r||0}),l.isObjEmpty(n.avgObj)||l.forIn(n.avgObj,function(e,n){a[e]||(a[e]=0);var r=l.isFunction(n)?n(t):t[n];i[e]?i[e]+=r||0:i[e]=r||0,(r||0==r)&&a[e]++}),l.isObjEmpty(n.maxObj)||l.forIn(n.maxObj,function(e,n){var r=l.isFunction(n)?n(t):t[n];i[e]=c(i[e],r,"max")}),l.isObjEmpty(n.minObj)||l.forIn(n.minObj,function(e,n){var r=l.isFunction(n)?n(t):t[n];i[e]=c(i[e],r,"min")}),l.isObjEmpty(n.countObj)||l.forIn(n.countObj,function(e,n){var r=l.isFunction(n)?n(t):t[n];switch(l.isUndefined(i[e])&&(i[e]=0),e){case"*"==n?e:"count_*":i[e]=o;break;default:l.isUndefined(r)||null==r||i[e]++}})}),l.forIn(n.avgObj,function(e,n){i[e]=i[e]/a[e]}),i}function u(e,n){if(!n)return e;if(l.isObject(n)&&!l.isFunction(n)){var a=i(n),c=s(n);e.sort(function(e,n){for(var r,t,i=a.length,o=0;o<i&&(r=a[o],t=c[o],e[r]===n[r]);o++);if(e[r]!==n[r]){if(e[r]>n[r]||void 0===n[r])return"desc"===t||"DESC"===t?-1:1;if(e[r]<n[r]||void 0===e[r])return"desc"===t||"DESC"===t?1:-1}return"desc"===t||"DESC"===t?n[r]-e[r]:e[r]-n[r]})}else l.isFunction(n)&&e.sort(n);return e}function d(e,n){if(!n&&0!=n)return e;var r=[],t=e.length,i=0;if(l.isNumber(n))t=t<n?t:n;else if(l.isArray(n)){if(n[0]>t)return[];n[0]<t&&(i=n[0]),t=n[0]+n[1]<t?n[0]+n[1]:t}for(;i<t;i++)r.push(e[i]);return r}"undefined"==typeof exports||exports.nodeType?e.jc=l:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=l),exports.jc=l),l.VERSION="1.1.0",l.map=function(e,n){return l.isArray(e)?e.map(n):[]},l.forIn=function(e,n){if(!l.isObject(e))return{};var r=0;for(var t in e)n(t,e[t],r),r++},l.filter=function(e,n){return l.isArray(e)?e.filter(n):[]},l.where=function(e,r){var n;if(l.isFunction(r))n=l.filter(e,r);else{if(!l.isObject(r))return[];n=l.filter(e,function(n){return i(r).every(function(e){return r[e]===n[e]})})}return n},l.limit=function(e,n){return d(e,n)},l.order=l.orderBy=function(e,n){return u(e,n)},l.tree=function(e,r){var n;r.children||(r.children="children"),l.isString(r.retain)?n=[r.retain,r.id,r.parent]:l.isArray(r.retain)?((n=r.retain).push(r.id),n.push(r.parent)):l.isObject(r.retain)?((n=r.retain)[r.id]=r.id,n[r.parent]=r.parent):e=l.extend(!0,[],e),n&&(e=l.sql({select:{col:n},from:e}));var t={},i=l.groupBy(e,function(e){return e[r.id]==r.root&&(t=e),e[r.parent]});return l.map(e,function(e){var n=e[r.id];i[n]&&(e[r.children]=i[n])}),l.isObjEmpty(t)&&(t[r.children]=i[r.root]),t},l.treeDic=function(e,n){var r={id:"id",children:"children",deleteEmptyChildren:!0};l.isObject(n)&&l.extend(r,n),l.isObject(e)&&(e=[e]);var t={};return function n(e){e.map(function(e){(t[e[r.id]]=e)[r.children]&&0!=e[r.children].length||!r.deleteEmptyChildren?n(e[r.children]):delete e[r.children]})}(e),t},l.treeFilter=function(e,n){var r={root:"0",id:"id",parent:"pid",children:"children",deleteEmptyChildren:!0};l.isObject(n)&&l.extend(r,n),l.isObject(e)&&(e=[e]),e=l.extend([],e);var t=[];!function n(e){e.map(function(e){t.push(e),e[r.children]&&0!=e[r.children].length||!r.deleteEmptyChildren?n(e[r.children]):delete e[r.children]})}(e);var i=l.where(t,r.filter);return l.tree(i,r)},l.treeMap=function(e,n){var r={root:"0",id:"id",parent:"pid",children:"children",deleteEmptyChildren:!0,map:function(e){return e}};return l.isObject(n)&&l.extend(r,n),function n(e){e.map(function(e){r.map(e),e[r.children]&&0!=e[r.children].length||!r.deleteEmptyChildren?n(e[r.children]):delete e[r.children]})}(l.isObject(e)?[e]:e),e},l.treeSearch=function(e,n){var t={children:"children",search:{}};l.isObject(n)&&l.extend(t,n);var r=l.isObject(e)?[e]:e,i=[];return function r(e){e.map(function(e){var n=t.search;0<l.where([e],n).length&&i.push(e),e[t.children]&&0!=e[t.children].length&&r(e[t.children])})}(r),i},l.treePath=function(e,n){var r={root:"0",id:"id",parent:"pid",children:"children",path:""};l.isObject(n)&&l.extend(r,n);var t=l.treeDic(e,r),i=[];return function e(n){t[n]&&(i.unshift(t[n]),t[n][r.parent]&&e(t[n][r.parent]))}(r.path),i},l.extend=function(){var e,n,r,t,i,o,a=arguments[0]||{},c=1,u=arguments.length,s=!1;for("boolean"==typeof a&&(s=a,a=arguments[1]||{},c++),"object"==typeof a||l.isFunction(a)||(a={}),u===c&&(a=this,--c);c<u;c++)if(null!=(e=arguments[c]))for(n in e)r=a[n],a!==(t=e[n])&&(s&&t&&(l.isObject(t)||(i=l.isArray(t)))?(o=i?(i=!1,r&&l.isArray(r)?r:[]):r&&l.isObject(r)?r:{},a[n]=l.extend(s,o,t)):void 0!==t&&(a[n]=t));return a},l.unique=function(e){if(!e||0==e.length)return e;var r={},t=[];l.map(e,function(e){var n=JSON.stringify(e);r[n]=e});return l.forIn(r,function(e,n){t.push(n)}),t},l.spaceFix=function(e,n){if(!e||0==e.length)return e;var r=[];0<e[0][n.key]-n.start&&((s={})[n.key]=n.start,l.map(n.zeroFill,function(e){s[e]=0}),e.unshift(s));e[e.length-1][n.key]<n.end&&((s={})[n.key]=n.end,l.map(n.zeroFill,function(e){s[e]=0}),e.push(s));for(var t=1,i=e.length;t<i&&!(1e4<t);t++){var o=e[t][n.key]-e[t-1][n.key];if(o<=n.space)r.push(e[t]);else{for(var a=n.space,c=0,u=o/n.space;c<u-1&&!(1e4<c);c++){var s;(s={})[n.key]=parseInt(e[t-1][n.key])+parseInt(a),l.map(n.zeroFill,function(e){s[e]=0}),r.push(s),a+=n.space}r.push(e[t])}}return r.unshift(e[0]),r},l.keyArray=function(e,n){if(!e||0==e.length)return e;l.isString(n)&&(n=[n]);var t={};return l.map(e,function(r,e){l.map(n,function(e,n){t[e]||(t[e]=[]),t[e].push(r[e])})}),t},l.keyBreak=function(e,t){if(!e||0==e.length)return e;var i=[],o=t.key,a=t.value;return l.map(e,function(r){l.map(t.break,function(e){var n={};n[o]=e,n[a]=r[e],l.map(t.retain,function(e){n[e]=r[e]}),i.push(n)})}),i},l.index=function(e,n){if(!e||0==e.length)return e;var r={};return l.map(e,function(e){r[e[n]]=e}),r},l.max=function(e,t){if(!e||0==e.length)return e;var i;if(l.isString(t)){var n=t;t=function(e){return e[n]}}else l.isUndefined(t)&&(t=function(e){return e});return l.map(e,function(e){var n=i?t(i):i,r=e?t(e):e;i=l.isNoVal(n)||l.isNoVal(r)?l.isNoVal(n)?e:i:r<n?i:e}),i},l.min=function(e,t){if(!e||0==e.length)return e;var i;if(l.isString(t)){var n=t;t=function(e){return e[n]}}else l.isUndefined(t)&&(t=function(e){return e});return l.map(e,function(e){var n=i?t(i):i,r=e?t(e):e;i=l.isNoVal(n)||l.isNoVal(r)?l.isNoVal(n)?e:i:n<r?i:e}),i},l.group=l.groupBy=function(e,n){if(!e||0==e.length)return e;var i={};return l.map(e,function(r,e){var t=[];l.isArray(n)?l.map(n,function(e,n){l.isFunction(e)?t.push(e(r)):t.push(r[e])}):l.isString(n)?t.push(r[n]):l.isFunction(n)&&(t=n(r,e)),i[t]||(i[t]=[]),i[t].push(r)}),i},l.sql=function(e){if(function(e){if(!e.from)throw new Error("From is not defined","Error from");if(!e.select)throw new Error("Select is not defined","Error select");!function(e){var n=e.select,r=e.groupBy;if(!(n.sum||n.avg||n.count||n.max||n.min))return;if(n.col&&!e.groupBy)return;var t=f("",n.col);t=s(t);var i=[],o=!1;l.isArray(r)?l.map(r,function(e,n){i.push(e)}):l.isString(r)?i.push(r):l.isFunction(r)&&(i=[r]);for(var a=0,c=t.length;a<c;a++){for(var u=0;u<c;u++){if(t[a]==i[u]){o=!0;break}if(l.isObject(t[a])&&l.isObject(i[u])&&String(t[a])===String(i[u])){o=!0;break}}if(!o)throw new Error("groupBy should contain select.col","Error groupBy");o=!1}}(e)}(e),0==e.from.length||!l.isArray(e.from))return[];var n,r,t,i,o,a,c=e.from;return r=c,n=(t=e.where)?l.where(r,t):r,i=n,o=e,l.forIn(o.select,function(e,n){a=!("col"==e)||a}),d(u(function(e,n){if(!n)throw new Error("Select is not defined","Error select");var o=[],a={};n.col&&(a.colObj=f("",n.col));n.sum&&(a.sumObj=f("sum_",n.sum));n.avg&&(a.avgObj=f("avg_",n.avg));n.max&&(a.maxObj=f("max_",n.max));n.min&&(a.minObj=f("min_",n.min));n.count&&(a.countObj=f("count_",n.count));l.isArray(e)?l.map(e,function(e,n){var r=p([e],a);o.push(r)}):l.forIn(e,function(e,n,r,t){var i=p(n,a);o.push(i)});return o}(function(e,c){if(!c)return e;var u={sumObj:{},avgObj:{},maxObj:{},minObj:{},countObj:{}},s={};return l.forIn(c,function(e,n){var r=e.split("_"),t=r.shift(),i=r.join("_");switch(i=i.replace(/[1-9a-zA-z_\$\@]+/g,function(e){return"row['"+e+"']"}),t){case"sum":u.sumObj[e]=function(e){return new Function("row","return "+i)(e)};break;case"avg":u.avgObj[e]=function(e){return new Function("row","return "+i)(e)};break;case"max":u.maxObj[e]=function(e){return new Function("row","return "+i)(e)};break;case"min":u.minObj[e]=function(e){return new Function("row","return "+i)(e)};break;case"count":u.countObj[e]=function(e){return new Function("row","return "+i)(e)}}}),l.forIn(e,function(e,n,r,t){var i,o=p(n,u);for(var a in c)if(foo=new Function("return "+o[a]+c[a]),!(i=foo()))break;i&&(s[e]=n)}),s}(o.groupBy||a?o.groupBy||o.select.col?l.group(i,o.groupBy):{table:i}:i,e.having),e.select),e.orderBy),e.limit)},l.isObjEmpty=function(e){for(var n in e)return!1;return!0},l.isNoVal=function(e){return l.isUndefined(e)||null==e||e!=e},l.isArray=t||function(e){return"[object Array]"===toString.call(e)},l.isObject=function(e){return"object"===typeof e&&!l.isArray(e)&&!!e},l.map(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){l["is"+n]=function(e){return{}.toString.call(e)==="[object "+n+"]"}}),l.isUndefined=function(e){return void 0===e},"function"==typeof define&&define.amd&&define("jc",[],function(){return l})}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"==("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global||this,n=(e.ec,Array.prototype),r=Object.prototype,t=(n.push,n.slice,r.toString,r.hasOwnProperty,Array.isArray,Object.keys),i=(Object.values&&Object.values,Object.create,function e(n){return n instanceof e?n:this instanceof e?void(this._wrapped=n):new e(n)});"undefined"==typeof exports||exports.nodeType?e.ec=i:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=i),exports.ec=i),i.VERSION="1.0.0";var f={globalOption:{color:["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],tooltip:{trigger:"axis"},grid:{top:48,left:16,right:16,bottom:12,containLabel:!0},title:{text:"",top:4,left:10,textStyle:{color:"#333"}},legend:{show:!0,top:8,right:10}}},p=function(e,n){var r=jc.extend(!0,{},f.globalOption);r=jc.extend(!0,r,n);var t=void 0;return e.easySet?(r=jc.extend(!0,r,e),t=e.easySet,delete r.easySet):t=e,function(e,n){var r=n.formatter;if(!r)return{chartOption:e,easySet:n};var t=e.tooltip?e.tooltip:{},i=e.legend?e.legend:{},o=e.title?e.title:{},a=e.xAxis&&e.xAxis[0]?e.xAxis[0]:{},c=e.yAxis&&e.yAxis[0]?e.yAxis[0]:{},u=a.axisLabel?a.axisLabel:{},s=c.axisLabel?c.axisLabel:{};return r.tooltip&&(t.formatter=r.tooltip),r.legend&&(i.formatter=r.legend),r.xAxis&&(u.formatter=r.xAxis),r.yAxis&&(s.formatter=r.yAxis),r.xName&&(a.name=r.xName),r.yName&&(c.name=r.yName),r.title&&(o.text=r.title),{chartOption:e,easySet:n}}(r,t)};f.barOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:[{type:"category"}],yAxis:[{type:"value"}],series:[{type:"bar"}]},i.barChart=function(e,n){var r=p(n,f.barOption),i=r.easySet,t=r.chartOption,o=[],a=[],c=[],u=t.series[0],s=jc.groupBy(e,i.legend);if(jc.sql({select:{col:{key:i.x},sum:{val:i.y}},from:e,groupBy:i.x,orderBy:!!i.orderBy&&{val:i.orderBy}}).map(function(e){var n=e.key;a.push(n)}),jc.forIn(s,function(e,n){var r=jc.extend(!0,{},u),t=jc.index(n,i.x);o.push(e),r.data=[],jc.map(a,function(e){r.data.push(t[e][i.y])}),r.name=e,i.stack&&(r.stack="总量"),c.push(r)}),t.series=c,t.legend.data=o,t.xAxis[0].data=a,"horizontal"===i.direction){var l;l=t.xAxis[0],t.xAxis[0]=t.yAxis[0],t.yAxis[0]=l}return t},f.lineOption={xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value"}],series:[{type:"line"}]},i.lineChart=function(e,n){var r=p(n,f.lineOption),i=r.easySet,t=r.chartOption,o=[],a=[],c=[],u=t.series[0],s=jc.groupBy(e,i.legend);if(jc.sql({select:{col:{key:i.x},sum:{val:i.y}},from:e,groupBy:i.x,orderBy:!!i.orderBy&&{val:i.orderBy}}).map(function(e){var n=e.key;a.push(n)}),jc.forIn(s,function(e,n){jc.keyArray(n,[i.y]);var r=jc.extend(!0,{},u),t=jc.index(n,i.x);o.push(e),r.data=[],jc.map(a,function(e){r.data.push(t[e])}),r.name=e,i.stack&&(r.stack="总量",r.areaStyle||(r.areaStyle={normal:{}})),c.push(r)}),t.series=c,t.legend.data=o,t.xAxis[0].data=a,"horizontal"===i.direction){var l;l=t.xAxis[0],t.xAxis[0]=t.yAxis[0],t.yAxis[0]=l}return t},f.pieOption={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{name:" ",type:"pie",radius:"55%",center:["50%","60%"]}]},i.pieChart=function(e,n){var r,t,i=p(n,f.pieOption),o=i.easySet,a=i.chartOption;return r=jc.sql({select:{col:{name:o.legend,value:o.val}},from:e,orderBy:!!o.orderBy&&{value:o.orderBy}}),t=jc.keyArray(r,["name"]).name,a.series[0].data=r,a.legend.data=t,a},f.kOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:[{type:"category"}],yAxis:[{type:"value"}],series:[{type:"k",itemStyle:{normal:{color:f.globalOption.color[0],color0:f.globalOption.color[0],borderColor:f.globalOption.color[0],borderColor0:f.globalOption.color[0]}}}]},i.kChart=function(e,n){var r=p(n,f.kOption),t=r.easySet,i=r.chartOption,o=[],a=[],c=i.series[0],u=jc.groupBy(e,t.legend);jc.sql({select:{col:{key:t.x,val:t.y}},from:e,groupBy:t.x,orderBy:!!t.orderBy&&{val:t.orderBy}}).map(function(e){var n=e.key;a.push(n)});var s=jc.extend(!0,{},c);if(s.data=[],jc.forIn(u,function(e,n){jc.keyArray(n,[t.y]);var r=jc.index(n,t.x);o.push(e),jc.map(a,function(e){s.data.push(r[e][t.y])})}),i.series=s,i.xAxis[0].data=a,"horizontal"===t.direction){var l;l=i.xAxis[0],i.xAxis[0]=i.yAxis[0],i.yAxis[0]=l}return i},jc.forIn(f,function(e,r){i[e]=function(e,n){r=n?jc.extend(!0,r,e):jc.extend(r,e)}}),"function"==typeof define&&define.amd&&define("ec",[],function(){return i})}();