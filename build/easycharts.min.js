!function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this,n=(e.jc,Array.prototype),t=Object.prototype;n.push;slice=n.slice,toString=t.toString,hasOwnProperty=t.hasOwnProperty;var r=Array.isArray,i=Object.keys,s=Object.values?Object.values:function(n){return i(n).map(function(e){return n[e]})},l=(Object.create,function(e){return e instanceof l?e:this instanceof l?void(this._wrapped=e):new l(e)});function u(e,n,t){return l.isNoVal(e)||l.isNoVal(n)?l.isNoVal(e)?n:e:(t="max"==t?n<e:e<n)?e:n}function f(n,e){var t={};return l.isArray(e)?l.map(e,function(e){t[n+e]=e}):l.isObject(e)?l.forIn(e,function(e,n){t[e]=n}):l.isString(e)&&(t[n+e]=e),t}function p(e,n){var i={},o=e.length,a={};return l.map(e,function(r){l.isObjEmpty(n.colObj)||l.forIn(n.colObj,function(e,n){var t=l.isFunction(n)?n(r):r[n];i[e]=t}),l.isObjEmpty(n.sumObj)||l.forIn(n.sumObj,function(e,n){var t=l.isFunction(n)?n(r):r[n];i[e]?i[e]+=t||0:i[e]=t||0}),l.isObjEmpty(n.avgObj)||l.forIn(n.avgObj,function(e,n){a[e]||(a[e]=0);var t=l.isFunction(n)?n(r):r[n];i[e]?i[e]+=t||0:i[e]=t||0,(t||0==t)&&a[e]++}),l.isObjEmpty(n.maxObj)||l.forIn(n.maxObj,function(e,n){var t=l.isFunction(n)?n(r):r[n];i[e]=u(i[e],t,"max")}),l.isObjEmpty(n.minObj)||l.forIn(n.minObj,function(e,n){var t=l.isFunction(n)?n(r):r[n];i[e]=u(i[e],t,"min")}),l.isObjEmpty(n.countObj)||l.forIn(n.countObj,function(e,n){var t=l.isFunction(n)?n(r):r[n];switch(l.isUndefined(i[e])&&(i[e]=0),e){case"*"==n?e:"count_*":i[e]=o;break;default:l.isUndefined(t)||null==t||i[e]++}})}),l.forIn(n.avgObj,function(e,n){i[e]=i[e]/a[e]}),i}function o(e,n){if(!n)return e;if(l.isObject(n)&&!l.isFunction(n)){var a=i(n),u=s(n);e.sort(function(e,n){for(var t,r,i=a.length,o=0;o<i&&(t=a[o],r=u[o],e[t]===n[t]);o++);if(e[t]!==n[t]){if(e[t]>n[t]||void 0===n[t])return"desc"===r||"DESC"===r?-1:1;if(e[t]<n[t]||void 0===e[t])return"desc"===r||"DESC"===r?1:-1}return"desc"===r||"DESC"===r?n[t]-e[t]:e[t]-n[t]})}else l.isFunction(n)&&e.sort(n);return e}function a(e,n){if(!n&&0!=n)return e;var t=[],r=e.length,i=0;if(l.isNumber(n))r=r<n?r:n;else if(l.isArray(n)){if(n[0]>r)return[];n[0]<r&&(i=n[0]),r=n[0]+n[1]<r?n[0]+n[1]:r}for(;i<r;i++)t.push(e[i]);return t}"undefined"==typeof exports||exports.nodeType?e.jc=l:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=l),exports.jc=l),l.VERSION="1.1.0",l.map=function(e,n){return l.isArray(e)?e.map(n):[]},l.forIn=function(e,n){if(!l.isObject(e))return{};var t=0;for(var r in e)n(r,e[r],t),t++},l.filter=function(e,n){return l.isArray(e)?e.filter(n):[]},l.where=function(e,t){var n;if(l.isFunction(t))n=l.filter(e,t);else{if(!l.isObject(t))return[];n=l.filter(e,function(n){return i(t).every(function(e){return t[e]===n[e]})})}return n},l.limit=function(e,n){return a(e,n)},l.order=l.orderBy=function(e,n){return o(e,n)},l.tree=function(e,t){var n;t.children||(t.children="children"),l.isString(t.retain)?n=[t.retain,t.id,t.parent]:l.isArray(t.retain)?((n=t.retain).push(t.id),n.push(t.parent)):l.isObject(t.retain)?((n=t.retain)[t.id]=t.id,n[t.parent]=t.parent):e=l.extend(!0,[],e),n&&(e=l.sql({select:{col:n},from:e}));var r={},i=l.groupBy(e,function(e){return e[t.id]==t.root&&(r=e),e[t.parent]});return l.map(e,function(e){var n=e[t.id];i[n]&&(e[t.children]=i[n])}),l.isObjEmpty(r)&&(r[t.children]=i[t.root]),r},l.treeDic=function(e,n){var t={id:"id",children:"children",deleteEmptyChildren:!0};l.isObject(n)&&l.extend(t,n),l.isObject(e)&&(e=[e]);var r={};return function n(e){e.map(function(e){(r[e[t.id]]=e)[t.children]&&0!=e[t.children].length||!t.deleteEmptyChildren?n(e[t.children]):delete e[t.children]})}(e),r},l.treeFilter=function(e,n){var t={root:"0",id:"id",parent:"pid",children:"children",deleteEmptyChildren:!0};l.isObject(n)&&l.extend(t,n),l.isObject(e)&&(e=[e]),e=l.extend([],e);var r=[];!function n(e){e.map(function(e){r.push(e),e[t.children]&&0!=e[t.children].length||!t.deleteEmptyChildren?n(e[t.children]):delete e[t.children]})}(e);var i=l.where(r,t.filter);return l.tree(i,t)},l.treeMap=function(e,n){var t={root:"0",id:"id",parent:"pid",children:"children",deleteEmptyChildren:!0,map:function(e){return e}};return l.isObject(n)&&l.extend(t,n),function n(e){e.map(function(e){t.map(e),e[t.children]&&0!=e[t.children].length||!t.deleteEmptyChildren?n(e[t.children]):delete e[t.children]})}(l.isObject(e)?[e]:e),e},l.treeSearch=function(e,n){var r={children:"children",search:{}};l.isObject(n)&&l.extend(r,n);var t=l.isObject(e)?[e]:e,i=[];return function t(e){e.map(function(e){var n=r.search;0<l.where([e],n).length&&i.push(e),e[r.children]&&0!=e[r.children].length&&t(e[r.children])})}(t),i},l.treePath=function(e,n){var t={root:"0",id:"id",parent:"pid",children:"children",path:""};l.isObject(n)&&l.extend(t,n);var r=l.treeDic(e,t),i=[];return function e(n){r[n]&&(i.unshift(r[n]),r[n][t.parent]&&e(r[n][t.parent]))}(t.path),i},l.extend=function(){var e,n,t,r,i,o,a=arguments[0]||{},u=1,c=arguments.length,s=!1;for("boolean"==typeof a&&(s=a,a=arguments[1]||{},u++),"object"==typeof a||l.isFunction(a)||(a={}),c===u&&(a=this,--u);u<c;u++)if(null!=(e=arguments[u]))for(n in e)t=a[n],a!==(r=e[n])&&(s&&r&&(l.isObject(r)||(i=l.isArray(r)))?(o=i?(i=!1,t&&l.isArray(t)?t:[]):t&&l.isObject(t)?t:{},a[n]=l.extend(s,o,r)):void 0!==r&&(a[n]=r));return a},l.unique=function(e){if(!e||0==e.length)return e;var t={},r=[];l.map(e,function(e){var n=JSON.stringify(e);t[n]=e});return l.forIn(t,function(e,n){r.push(n)}),r},l.spaceFix=function(e,n){if(!e||0==e.length)return e;var t=[];0<e[0][n.key]-n.start&&((s={})[n.key]=n.start,l.map(n.zeroFill,function(e){s[e]=0}),e.unshift(s));e[e.length-1][n.key]<n.end&&((s={})[n.key]=n.end,l.map(n.zeroFill,function(e){s[e]=0}),e.push(s));for(var r=1,i=e.length;r<i&&!(1e4<r);r++){var o=e[r][n.key]-e[r-1][n.key];if(o<=n.space)t.push(e[r]);else{for(var a=n.space,u=0,c=o/n.space;u<c-1&&!(1e4<u);u++){var s;(s={})[n.key]=parseInt(e[r-1][n.key])+parseInt(a),l.map(n.zeroFill,function(e){s[e]=0}),t.push(s),a+=n.space}t.push(e[r])}}return t.unshift(e[0]),t},l.keyArray=function(e,n){if(!e||0==e.length)return e;l.isString(n)&&(n=[n]);var r={};return l.map(e,function(t,e){l.map(n,function(e,n){r[e]||(r[e]=[]),r[e].push(t[e])})}),r},l.keyBreak=function(e,r){if(!e||0==e.length)return e;var i=[],o=r.key,a=r.value;return l.map(e,function(t){l.map(r.break,function(e){var n={};n[o]=e,n[a]=t[e],l.map(r.retain,function(e){n[e]=t[e]}),i.push(n)})}),i},l.index=function(e,n){if(!e||0==e.length)return e;var t={};return l.map(e,function(e){t[e[n]]=e}),t},l.max=function(e,r){if(!e||0==e.length)return e;var i;if(l.isString(r)){var n=r;r=function(e){return e[n]}}else l.isUndefined(r)&&(r=function(e){return e});return l.map(e,function(e){var n=i?r(i):i,t=e?r(e):e;i=l.isNoVal(n)||l.isNoVal(t)?l.isNoVal(n)?e:i:t<n?i:e}),i},l.min=function(e,r){if(!e||0==e.length)return e;var i;if(l.isString(r)){var n=r;r=function(e){return e[n]}}else l.isUndefined(r)&&(r=function(e){return e});return l.map(e,function(e){var n=i?r(i):i,t=e?r(e):e;i=l.isNoVal(n)||l.isNoVal(t)?l.isNoVal(n)?e:i:n<t?i:e}),i},l.group=l.groupBy=function(e,n){if(!e||0==e.length)return e;var i={};return l.map(e,function(t,e){var r=[];l.isArray(n)?l.map(n,function(e,n){l.isFunction(e)?r.push(e(t)):r.push(t[e])}):l.isString(n)?r.push(t[n]):l.isFunction(n)&&(r=n(t,e)),i[r]||(i[r]=[]),i[r].push(t)}),i},l.sql=function(e){return function(e){if(!e.from)throw new Error("From is not defined","Error from");if(!e.select)throw new Error("Select is not defined","Error select");!function(e){var n=e.select,t=e.groupBy;if(!(n.sum||n.avg||n.count||n.max||n.min))return;if(n.col&&!e.groupBy)return;var r=f("",n.col);r=s(r);var i=[],o=!1;l.isArray(t)?l.map(t,function(e,n){i.push(e)}):l.isString(t)?i.push(t):l.isFunction(t)&&(i=[t]);for(var a=0,u=r.length;a<u;a++){for(var c=0;c<u;c++){if(r[a]==i[c]){o=!0;break}if(l.isObject(r[a])&&l.isObject(i[c])&&String(r[a])===String(i[c])){o=!0;break}}if(!o)throw new Error("groupBy should contain select.col","Error groupBy");o=!1}}(e)}(e),0!=e.from.length&&l.isArray(e.from)?a(o(function(e,n){if(!n)throw new Error("Select is not defined","Error select");var o=[],a={};n.col&&(a.colObj=f("",n.col));n.sum&&(a.sumObj=f("sum_",n.sum));n.avg&&(a.avgObj=f("avg_",n.avg));n.max&&(a.maxObj=f("max_",n.max));n.min&&(a.minObj=f("min_",n.min));n.count&&(a.countObj=f("count_",n.count));l.isArray(e)?l.map(e,function(e,n){var t=p([e],a);o.push(t)}):l.forIn(e,function(e,n,t,r){var i=p(n,a);o.push(i)});return o}(function(e,u){if(!u)return e;var c={sumObj:{},avgObj:{},maxObj:{},minObj:{},countObj:{}},s={};return l.forIn(u,function(e,n){var t=e.split("_"),r=t.shift(),i=t.join("_");switch(i=i.replace(/[1-9a-zA-z_\$\@]+/g,function(e){return"row['"+e+"']"}),r){case"sum":c.sumObj[e]=function(e){return new Function("row","return "+i)(e)};break;case"avg":c.avgObj[e]=function(e){return new Function("row","return "+i)(e)};break;case"max":c.maxObj[e]=function(e){return new Function("row","return "+i)(e)};break;case"min":c.minObj[e]=function(e){return new Function("row","return "+i)(e)};break;case"count":c.countObj[e]=function(e){return new Function("row","return "+i)(e)}}}),l.forIn(e,function(e,n,t,r){var i,o=p(n,c);for(var a in u)if(foo=new Function("return "+o[a]+u[a]),!(i=foo()))break;i&&(s[e]=n)}),s}(function(e,n){var t;return l.forIn(n.select,function(e,n){t=!("col"==e)||t}),n.groupBy||t?n.groupBy||n.select.col?l.group(e,n.groupBy):{table:e}:e}(function(e,n){return n?l.where(e,n):e}(e.from,e.where),e),e.having),e.select),e.orderBy),e.limit):[]},l.isObjEmpty=function(e){for(var n in e)return!1;return!0},l.isNoVal=function(e){return l.isUndefined(e)||null==e||e!=e},l.isArray=r||function(e){return"[object Array]"===toString.call(e)},l.isObject=function(e){return"object"==typeof e&&!l.isArray(e)&&!!e},l.map(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){l["is"+n]=function(e){return{}.toString.call(e)==="[object "+n+"]"}}),l.isUndefined=function(e){return void 0===e},"function"==typeof define&&define.amd&&define("jc",[],function(){return l})}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"==("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global||this,n=(e.ec,Array.prototype),t=Object.prototype,r=(n.push,n.slice,t.toString,t.hasOwnProperty,Array.isArray,Object.keys),i=(Object.values&&Object.values,Object.create,function e(n){return n instanceof e?n:this instanceof e?void(this._wrapped=n):new e(n)});"undefined"==typeof exports||exports.nodeType?e.ec=i:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=i),exports.ec=i),i.VERSION="1.0.0";var f={globalOption:{color:["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],tooltip:{trigger:"axis"},grid:{top:48,left:16,right:16,bottom:12,containLabel:!0},title:{text:"",top:4,left:10,textStyle:{color:"#333"}},legend:{show:!0,top:8,right:10}}},p=function(e,n){var t=jc.extend(!0,{},f.globalOption);t=jc.extend(!0,t,n);var r=void 0;return e.easySet?(t=jc.extend(!0,t,e),r=e.easySet,delete t.easySet):r=e,function(e,n){var t=n.formatter;if(!t)return{chartOption:e,easySet:n};var r=e.tooltip?e.tooltip:{},i=e.legend?e.legend:{},o=e.title?e.title:{},a=e.xAxis&&e.xAxis[0]?e.xAxis[0]:{},u=e.yAxis&&e.yAxis[0]?e.yAxis[0]:{},c=a.axisLabel=a.axisLabel?a.axisLabel:{},s=u.axisLabel=u.axisLabel?u.axisLabel:{};return t.tooltip&&(r.formatter=t.tooltip),t.legend&&(i.formatter=t.legend),t.xAxis&&(c.formatter=t.xAxis),t.yAxis&&(s.formatter=t.yAxis),t.xName&&(a.name=t.xName),t.yName&&(u.name=t.yName),t.title&&(o.text=t.title),{chartOption:e,easySet:n}}(t,r)};f.barOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:[{type:"category"}],yAxis:[{type:"value"}],series:[{type:"bar"}]},i.barChart=function(e,n){var t=p(n,f.barOption),i=t.easySet,r=t.chartOption,o=[],a=[],u=[],c=r.series[0],s=jc.groupBy(e,i.legend);if(jc.sql({select:{col:{key:i.x},sum:{val:i.y}},from:e,groupBy:i.x,orderBy:!!i.orderBy&&{val:i.orderBy}}).map(function(e){var n=e.key;a.push(n)}),jc.forIn(s,function(e,n){var t=jc.extend(!0,{},c),r=jc.index(n,i.x);o.push(e),t.data=[],jc.map(a,function(e){t.data.push(r[e][i.y])}),t.name=e,i.stack&&(t.stack="总量"),u.push(t)}),r.series=u,r.legend.data=o,r.xAxis[0].data=a,"horizontal"===i.direction){var l;l=r.xAxis[0],r.xAxis[0]=r.yAxis[0],r.yAxis[0]=l}return r},f.lineOption={xAxis:[{type:"category",boundaryGap:!1}],yAxis:[{type:"value"}],series:[{type:"line"}]},i.lineChart=function(e,n){var t=p(n,f.lineOption),i=t.easySet,r=t.chartOption,o=[],a=[],u=[],c=r.series[0],s=jc.groupBy(e,i.legend);if(jc.sql({select:{col:{key:i.x},sum:{val:i.y}},from:e,groupBy:i.x,orderBy:!!i.orderBy&&{val:i.orderBy}}).map(function(e){var n=e.key;a.push(n)}),jc.forIn(s,function(e,n){jc.keyArray(n,[i.y]);var t=jc.extend(!0,{},c),r=jc.index(n,i.x);o.push(e),t.data=[],jc.map(a,function(e){t.data.push(r[e])}),t.name=e,i.stack&&(t.stack="总量",t.areaStyle||(t.areaStyle={normal:{}})),u.push(t)}),r.series=u,r.legend.data=o,r.xAxis[0].data=a,"horizontal"===i.direction){var l;l=r.xAxis[0],r.xAxis[0]=r.yAxis[0],r.yAxis[0]=l}return r},f.pieOption={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{name:" ",type:"pie",radius:"55%",center:["50%","60%"]}]},i.pieChart=function(e,n){var t,r,i=p(n,f.pieOption),o=i.easySet,a=i.chartOption;return t=jc.sql({select:{col:{name:o.legend,value:o.val}},from:e,orderBy:!!o.orderBy&&{value:o.orderBy}}),r=jc.keyArray(t,["name"]).name,a.series[0].data=t,a.legend.data=r,a},f.kOption={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:[{type:"category"}],yAxis:[{type:"value"}],series:[{type:"k",itemStyle:{normal:{color:f.globalOption.color[0],color0:f.globalOption.color[0],borderColor:f.globalOption.color[0],borderColor0:f.globalOption.color[0]}}}]},i.kChart=function(e,n){var t=p(n,f.kOption),r=t.easySet,i=t.chartOption,o=[],a=[],u=i.series[0],c=jc.groupBy(e,r.legend);jc.sql({select:{col:{key:r.x,val:r.y}},from:e,groupBy:r.x,orderBy:!!r.orderBy&&{val:r.orderBy}}).map(function(e){var n=e.key;a.push(n)});var s=jc.extend(!0,{},u);if(s.data=[],jc.forIn(c,function(e,n){jc.keyArray(n,[r.y]);var t=jc.index(n,r.x);o.push(e),jc.map(a,function(e){s.data.push(t[e][r.y])})}),i.series=s,i.xAxis[0].data=a,"horizontal"===r.direction){var l;l=i.xAxis[0],i.xAxis[0]=i.yAxis[0],i.yAxis[0]=l}return i},f.mapOption={color:["#9d70e3","#9d70e3"],tooltip:{trigger:"item"},visualMap:{min:0,left:"left",top:"bottom",text:["高","低"],calculable:!0,inRange:{color:["#ddf5ff","#5fb0ff"]}},legend:{orient:"vertical",top:"bottom",left:"right"},series:[{name:"地图",type:"map",mapType:"",itemStyle:{normal:{label:{show:!0}},emphasis:{label:{show:!1}}},data:[]}]},i.mapChart=function(e,n){var t=p(n,f.mapOption),r=t.easySet,i=t.chartOption,o={},a=jc.sql({select:{col:{name:r.region,value:function(n){var t=0;return jc.map(r.value,function(e){o[r.region]=n,t+=n[e]}),t}}},from:e}),u=jc.max(a,"value");return delete i.xAxis,delete i.yAxis,i.visualMap.max=u.value,i.series[0].data=a,i.series[0].mapType=r.mapType,i},f.boxplotOption={tooltip:{formatter:function(e){return console.log(e),e[0].name+"<br/>\n        最大值: "+e[0].data[5]+"<br/>\n        上四分位: "+e[0].data[4]+"<br/>\n        中位数: "+e[0].data[3]+"<br/>\n        下四分位: "+e[0].data[2]+"<br/>\n        最小值: "+e[0].data[1]+"\n        "}},xAxis:[{type:"category",boundaryGap:!0,nameGap:30,splitArea:{show:!1},splitLine:{show:!1},data:[]}],yAxis:[{type:"value"}],series:[{name:"boxplot",type:"boxplot"}]},i.boxplotChart=function(e,n){var t=p(n,f.boxplotOption),r=t.easySet,i=t.chartOption,o=[],a=[],u=(i.series[0],[]);return e.map(function(n){var t=[];r.y.map(function(e){console.log(e,n[e]),t.push(n[e])}),o.push(n[r.legend]),a.push(n[r.x]),u.push(t.sort(function(e,n){return e-n}))}),i.series[0].data=u,i.legend.data=o,i.xAxis[0].data=a,console.log(i),i},jc.forIn(f,function(e,t){i[e]=function(e,n){t=n?jc.extend(!0,t,e):jc.extend(t,e)}}),"function"==typeof define&&define.amd&&define("ec",[],function(){return i})}();